webpackJsonp([5],{17:function(t,e,i){var s=i(3),n=i(5),r=i(4),a=function(){function t(){var t=this;this.configService=new n.default,this.$embedContainer=document.getElementById("embed-content"),this.$embedResource=document.getElementById("embed-image"),this.resourceOriginalWidth=this.configService.get("resource.width"),this.resourceOriginalHeight=this.configService.get("resource.height"),!0===this.configService.get("isStandalone")?this.initResizer():(this.$embedResource.style.width="100%",this.$embedResource.style.height="auto",this.pymChild=new s.Child({id:"phraseanet-embed-frame",renderCallback:function(e){var i=t.resourceOriginalHeight/t.resourceOriginalWidth;t.$embedResource.style.width="100%",t.$embedResource.style.height="auto",t.$embedContainer.style.height=e*i+"px"}}),""===this.pymChild.parentUrl&&this.initResizer())}return t.prototype.initResizer=function(){this.resizer=new r.default({target:this.$embedResource,container:this.$embedContainer,resizeOnWindowChange:!0===this.configService.get("resource.fitIn")}),this.resizer.setContainerDimensions({width:window.innerWidth,height:window.innerHeight}),this.resizer.setTargetDimensions({width:this.resourceOriginalWidth,height:this.resourceOriginalHeight}),this.resizer.resize()},t}();e.default=a,window.embedPlugin=new a},3:function(t,e,i){var s,n;/*! pym.js - v1.3.2 - 2018-02-13 */
!function(r){s=r,void 0!==(n="function"==typeof s?s.call(e,i,e,t):s)&&(t.exports=n)}(function(){var t={},e=function(t){var e=document.createEvent("Event");e.initEvent("pym:"+t,!0,!0),document.dispatchEvent(e)},i=function(t){var e=new RegExp("[\\?&]"+t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]")+"=([^&#]*)"),i=e.exec(location.search);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))},s=function(t,e){if(("*"===e.xdomain||t.origin.match(new RegExp(e.xdomain+"$")))&&"string"==typeof t.data)return!0},n=function(t){var e=/^(?:(?:https?|mailto|ftp):|[^&:\/?#]*(?:[\/?#]|$))/gi;if(t.match(e))return!0},r=function(t,e,i){return["pym",t,e,i].join("xPYMx")},a=function(t){var e=["pym",t,"(\\S+)","(.*)"];return new RegExp("^"+e.join("xPYMx")+"$")},o=Date.now||function(){return(new Date).getTime()},h=function(t,e,i){var s,n,r,a=null,h=0;i||(i={});var l=function(){h=!1===i.leading?0:o(),a=null,r=t.apply(s,n),a||(s=n=null)};return function(){var d=o();h||!1!==i.leading||(h=d);var g=e-(d-h);return s=this,n=arguments,g<=0||g>e?(a&&(clearTimeout(a),a=null),h=d,r=t.apply(s,n),a||(s=n=null)):a||!1===i.trailing||(a=setTimeout(l,g)),r}},l=function(){for(var e=t.autoInitInstances.length,i=e-1;i>=0;i--){var s=t.autoInitInstances[i];s.el.getElementsByTagName("iframe").length&&s.el.getElementsByTagName("iframe")[0].contentWindow||t.autoInitInstances.splice(i,1)}};return t.autoInitInstances=[],t.autoInit=function(i){var s=document.querySelectorAll("[data-pym-src]:not([data-pym-auto-initialized])"),n=s.length;l();for(var r=0;r<n;++r){var a=s[r];a.setAttribute("data-pym-auto-initialized",""),""===a.id&&(a.id="pym-"+r+"-"+Math.random().toString(36).substr(2,5));var o=a.getAttribute("data-pym-src"),h={xdomain:"string",title:"string",name:"string",id:"string",sandbox:"string",allowfullscreen:"boolean",parenturlparam:"string",parenturlvalue:"string",optionalparams:"boolean",trackscroll:"boolean",scrollwait:"number"},d={};for(var g in h)if(null!==a.getAttribute("data-pym-"+g))switch(h[g]){case"boolean":d[g]=!("false"===a.getAttribute("data-pym-"+g));break;case"string":d[g]=a.getAttribute("data-pym-"+g);break;case"number":var c=Number(a.getAttribute("data-pym-"+g));isNaN(c)||(d[g]=c)}var m=new t.Parent(a.id,o,d);t.autoInitInstances.push(m)}return i||e("pym-initialized"),t.autoInitInstances},t.Parent=function(t,e,i){this.id=t,this.url=e,this.el=document.getElementById(t),this.iframe=null,this.settings={xdomain:"*",optionalparams:!0,parenturlparam:"parentUrl",parenturlvalue:window.location.href,trackscroll:!1,scrollwait:100},this.messageRegex=a(this.id),this.messageHandlers={},i=i||{},this._constructIframe=function(){var t=this.el.offsetWidth.toString();this.iframe=document.createElement("iframe");var e="",i=this.url.indexOf("#");for(i>-1&&(e=this.url.substring(i,this.url.length),this.url=this.url.substring(0,i)),this.url.indexOf("?")<0?this.url+="?":this.url+="&",this.iframe.src=this.url+"initialWidth="+t+"&childId="+this.id,this.settings.optionalparams&&(this.iframe.src+="&parentTitle="+encodeURIComponent(document.title),this.iframe.src+="&"+this.settings.parenturlparam+"="+encodeURIComponent(this.settings.parenturlvalue)),this.iframe.src+=e,this.iframe.setAttribute("width","100%"),this.iframe.setAttribute("scrolling","no"),this.iframe.setAttribute("marginheight","0"),this.iframe.setAttribute("frameborder","0"),this.settings.title&&this.iframe.setAttribute("title",this.settings.title),void 0!==this.settings.allowfullscreen&&!1!==this.settings.allowfullscreen&&this.iframe.setAttribute("allowfullscreen",""),void 0!==this.settings.sandbox&&"string"==typeof this.settings.sandbox&&this.iframe.setAttribute("sandbox",this.settings.sandbox),this.settings.id&&(document.getElementById(this.settings.id)||this.iframe.setAttribute("id",this.settings.id)),this.settings.name&&this.iframe.setAttribute("name",this.settings.name);this.el.firstChild;)this.el.removeChild(this.el.firstChild);this.el.appendChild(this.iframe),window.addEventListener("resize",this._onResize),this.settings.trackscroll&&window.addEventListener("scroll",this._throttleOnScroll)},this._onResize=function(){this.sendWidth(),this.settings.trackscroll&&this.sendViewportAndIFramePosition()}.bind(this),this._onScroll=function(){this.sendViewportAndIFramePosition()}.bind(this),this._fire=function(t,e){if(t in this.messageHandlers)for(var i=0;i<this.messageHandlers[t].length;i++)this.messageHandlers[t][i].call(this,e)},this.remove=function(){window.removeEventListener("message",this._processMessage),window.removeEventListener("resize",this._onResize),this.el.removeChild(this.iframe),l()},this._processMessage=function(t){if(s(t,this.settings)&&"string"==typeof t.data){var e=t.data.match(this.messageRegex);if(!e||3!==e.length)return!1;var i=e[1],n=e[2];this._fire(i,n)}}.bind(this),this._onHeightMessage=function(t){var e=parseInt(t);this.iframe.setAttribute("height",e+"px")},this._onNavigateToMessage=function(t){n(t)&&(document.location.href=t)},this._onScrollToChildPosMessage=function(t){var e=document.getElementById(this.id).getBoundingClientRect().top+window.pageYOffset,i=e+parseInt(t);window.scrollTo(0,i)},this.onMessage=function(t,e){t in this.messageHandlers||(this.messageHandlers[t]=[]),this.messageHandlers[t].push(e)},this.sendMessage=function(t,e){this.el.getElementsByTagName("iframe").length&&(this.el.getElementsByTagName("iframe")[0].contentWindow?this.el.getElementsByTagName("iframe")[0].contentWindow.postMessage(r(this.id,t,e),"*"):this.remove())},this.sendWidth=function(){var t=this.el.offsetWidth.toString();this.sendMessage("width",t)},this.sendViewportAndIFramePosition=function(){var t=this.iframe.getBoundingClientRect(),e=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,s=e+" "+i;s+=" "+t.top+" "+t.left,s+=" "+t.bottom+" "+t.right,this.sendMessage("viewport-iframe-position",s)};for(var o in i)this.settings[o]=i[o];return this._throttleOnScroll=h(this._onScroll.bind(this),this.settings.scrollwait),this.onMessage("height",this._onHeightMessage),this.onMessage("navigateTo",this._onNavigateToMessage),this.onMessage("scrollToChildPos",this._onScrollToChildPosMessage),this.onMessage("parentPositionInfo",this.sendViewportAndIFramePosition),window.addEventListener("message",this._processMessage,!1),this._constructIframe(),this},t.Child=function(t){this.parentWidth=null,this.id=null,this.parentTitle=null,this.parentUrl=null,this.settings={renderCallback:null,xdomain:"*",polling:0,parenturlparam:"parentUrl"},this.timerId=null,this.messageRegex=null,this.messageHandlers={},t=t||{},this.onMessage=function(t,e){t in this.messageHandlers||(this.messageHandlers[t]=[]),this.messageHandlers[t].push(e)},this._fire=function(t,e){if(t in this.messageHandlers)for(var i=0;i<this.messageHandlers[t].length;i++)this.messageHandlers[t][i].call(this,e)},this._processMessage=function(t){if(s(t,this.settings)&&"string"==typeof t.data){var e=t.data.match(this.messageRegex);if(e&&3===e.length){var i=e[1],n=e[2];this._fire(i,n)}}}.bind(this),this._onWidthMessage=function(t){var e=parseInt(t);e!==this.parentWidth&&(this.parentWidth=e,this.settings.renderCallback&&this.settings.renderCallback(e),this.sendHeight())},this.sendMessage=function(t,e){window.parent.postMessage(r(this.id,t,e),"*")},this.sendHeight=function(){var t=document.getElementsByTagName("body")[0].offsetHeight.toString();return this.sendMessage("height",t),t}.bind(this),this.getParentPositionInfo=function(){this.sendMessage("parentPositionInfo")},this.scrollParentTo=function(t){this.sendMessage("navigateTo","#"+t)},this.navigateParentTo=function(t){this.sendMessage("navigateTo",t)},this.scrollParentToChildEl=function(t){var e=document.getElementById(t).getBoundingClientRect().top+window.pageYOffset;this.scrollParentToChildPos(e)},this.scrollParentToChildPos=function(t){this.sendMessage("scrollToChildPos",t.toString())};this.remove=function(){window.removeEventListener("message",this._processMessage),this.timerId&&clearInterval(this.timerId)};for(var n in t)this.settings[n]=t[n];this.id=i("childId")||t.id,this.messageRegex=new RegExp("^pymxPYMx"+this.id+"xPYMx(\\S+)xPYMx(.*)$");var a=parseInt(i("initialWidth"));return this.parentUrl=i(this.settings.parenturlparam),this.parentTitle=i("parentTitle"),this.onMessage("width",this._onWidthMessage),window.addEventListener("message",this._processMessage,!1),this.settings.renderCallback&&this.settings.renderCallback(a),this.sendHeight(),this.settings.polling&&(this.timerId=window.setInterval(this.sendHeight,this.settings.polling)),function(t){var i,s=document.getElementsByTagName("html")[0],n=s.className;try{i=window.self!==window.top?"embedded":"not-embedded"}catch(t){i="embedded"}n.indexOf(i)<0&&(s.className=n?n+" "+i:i,t&&t(i),e("marked-embedded"))}(t.onMarkedEmbeddedStatus),this},"undefined"!=typeof document&&t.autoInit(!0),t})},4:function(t,e,i){var s=i(0),n=function(){function t(t){var e=this;if(t||(t={}),t.target&&(this.$embedResource=t.target),t.container)this.$embedContainer=t.container;else{var i=document.getElementsByTagName("body");this.$embedContainer=i[0]}void 0!==t.resizeCallback&&(this.resizeCallback=t.resizeCallback),!0===t.resizeOnWindowChange&&window.addEventListener("resize",s.debounce(function(){e.onResizeWindow(window.innerWidth,window.innerHeight)},300),!1),this.defaultWidth=120,this.defaultHeight=120}return t.prototype.setContainerDimensions=function(t){this.containerDimensions=t},t.prototype.setTargetDimensions=function(t){this.targetDimensions=t},t.prototype.onResizeWindow=function(t,e){this.setContainerDimensions({width:t,height:e}),this.resize()},t.prototype.resize=function(){var t=this.containerDimensions.width,e=this.containerDimensions.height,i=this.targetDimensions.width,s=this.targetDimensions.height,n=this.targetDimensions.height/this.targetDimensions.width,r=i,a=s;i>s?(r>t&&(r=t,a=t*n),a>e&&(r=e/n,a=e)):a>e&&(r=e/n,a=e),null===r&&null===a&&(r=this.defaultWidth,a=this.defaultHeight),r=Math.floor(r),a=Math.floor(a);var o=0;this.containerDimensions.height>a&&(o=(this.containerDimensions.height-a)/2),this.$embedResource.style.width=r+"px",this.$embedResource.style.height=a+"px",this.$embedContainer.style.width=r+"px",this.$embedContainer.style.height=a+"px",this.$embedContainer.style["margin-top"]=o+"px",void 0!==this.resizeCallback&&this.resizeCallback.apply(this,[{width:r,height:a,"margin-top":o}])},t}();e.default=n}},[17]);